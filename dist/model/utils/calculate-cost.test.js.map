{"version":3,"file":"calculate-cost.test.js","sourceRoot":"","sources":["../../../src/model/utils/calculate-cost.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { describe, expect, test } from 'vitest';\nimport { calculateCost } from './calculate-cost.js';\n\ndescribe('Calculates cost for', () => {\n  test.each([\n    { model: 'gpt-4', prompt: 1000, completion: 1000, expected: 9 },\n    {\n      model: 'gpt-4-1106-preview',\n      prompt: 1000,\n      completion: 1000,\n      expected: 4,\n    },\n    {\n      model: 'gpt-4-turbo',\n      prompt: 1000,\n      completion: 1000,\n      expected: 4,\n    },\n    { model: 'gpt-4-0613', prompt: 1000, completion: 1000, expected: 9 },\n    { model: 'gpt-4-32k', prompt: 1000, completion: 1000, expected: 18 },\n    { model: 'gpt-4-32k-0613', prompt: 1000, completion: 1000, expected: 18 },\n    { model: 'gpt-3.5-turbo', prompt: 1000, completion: 1000, expected: 0.35 },\n    {\n      model: 'gpt-3.5-turbo-0613',\n      prompt: 1000,\n      completion: 1000,\n      expected: 0.35,\n    },\n    {\n      model: 'gpt-3.5-turbo-16k',\n      prompt: 1000,\n      completion: 1000,\n      expected: 0.7,\n    },\n    {\n      model: 'gpt-3.5-turbo-16k-0613',\n      prompt: 1000,\n      completion: 1000,\n      expected: 0.7,\n    },\n    { model: 'babbage-002', prompt: 1000, completion: 1000, expected: 0.08 },\n    { model: 'davinci-002', prompt: 1000, completion: 1000, expected: 0.4 },\n    {\n      model: 'text-embedding-ada-002',\n      prompt: 1000,\n      completion: 1000,\n      expected: 0.02,\n    },\n    {\n      model: 'ft:gpt-3.5-turbo:my-org:custom_suffix:id',\n      prompt: 1000,\n      completion: 1000,\n      expected: 2.8,\n    },\n    {\n      model: 'ft:davinci-002:my-org:custom_suffix:id',\n      prompt: 1000,\n      completion: 1000,\n      expected: 2.4,\n    },\n    {\n      model: 'ft:babbage-002:my-org:custom_suffix:id',\n      prompt: 1000,\n      completion: 1000,\n      expected: 0.32,\n    },\n    {\n      model: 'ada:ft-your-org:custom-model-name-2022-02-15-04-21-04',\n      prompt: 1000,\n      completion: 1000,\n      expected: 0.32,\n    },\n    {\n      model: 'babbage:ft-your-org:custom-model-name-2022-02-15-04-21-04',\n      prompt: 1000,\n      completion: 1000,\n      expected: 0.48,\n    },\n  ])('$model', ({ model, prompt, completion, expected }) => {\n    const usage = {\n      prompt_tokens: prompt,\n      completion_tokens: completion,\n    };\n    const cost = calculateCost({ model, tokens: usage });\n    expect(cost).toEqual(expected);\n  });\n});\n"]}